{"version":3,"file":"modules/./player.js","mappings":";;;;;;;;;;;;;;;;;AAAA;AACA,IAAMA,GAAG,GAAI,SAASC,SAAT,GAAqB;AAChC,WAASC,MAAT,CAAgBC,cAAhB,EAAgC;AAC9BC,IAAAA,MAAM,CAACC,UAAP,GAAoBD,MAAM,CAACC,UAAP,IAAqB,EAAzC;AACAD,IAAAA,MAAM,CAACC,UAAP,CAAkBC,IAAlB,CAAuBH,cAAvB;AACD;;AAED,WAASI,IAAT,CAAcC,UAAd,EAA0B;AACxB,QAAIC,MAAM,GAAG,EAAb;;AAEA,QAAI;AACFA,MAAAA,MAAM,GAAGD,UAAU,EAAnB;AACD,KAFD,CAEE,OAAOE,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CACE,wDADF,EAEEA,KAFF;AAID;;AAEDN,IAAAA,MAAM,CAACC,UAAP,GAAoBD,MAAM,CAACC,UAAP,IAAqB,EAAzC;AACAD,IAAAA,MAAM,CAACC,UAAP,CAAkBO,OAAlB;AAAA,8FAA0B,iBAAMC,UAAN;AAAA;AAAA;AAAA;AAAA;AAAA,sBACpB,OAAOA,UAAP,KAAsB,UADF;AAAA;AAAA;AAAA;;AAAA,sBAEhB,IAAIC,KAAJ,CAAU,8BAAV,CAFgB;;AAAA;AAAA;AAAA;AAAA,uBAKhBD,UAAU,CAACJ,MAAD,CALM;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAOtBE,gBAAAA,OAAO,CAACD,KAAR,kBAAwBG,UAAU,CAACE,IAAnC;;AAPsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA1B;;AAAA;AAAA;AAAA;AAAA;AAUA,WAAOX,MAAM,CAACC,UAAd;AACD;;AAED,SAAO;AAAEH,IAAAA,MAAM,EAANA,MAAF;AAAUK,IAAAA,IAAI,EAAJA;AAAV,GAAP;AACD,CAjCW,EAAZ;;AAmCA,sDAAeP,GAAf;;ACpCe,SAASgB,QAAT,GAAmC;AAAA,MAAjBC,IAAiB,uEAAVC,QAAU;AAChD;AACAD,EAAAA,IAAI,CAACE,gBAAL,CAAsB,OAAtB,EAA+B,UAAAC,KAAK,EAAI;AACtC,QAAIA,KAAK,CAACC,MAAN,CAAaC,OAAb,CAAqB,mBAArB,CAAJ,EAA+C;AAC7CC,MAAAA,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8BL,KAAK,CAACC,MAAN,CAAaK,OAAb,CAAqBC,IAAnD;AACAC,MAAAA,KAAK,4BAAqBR,KAAK,CAACC,MAAN,CAAaK,OAAb,CAAqBC,IAA1C,gCAAL;AACD;AACF,GALD;AAMD;;;;;;;;;;;;ACRD;AACO,SAASE,QAAT,CAAkBC,QAAlB,EAA4BC,KAA5B,EAAmCC,SAAnC,EAA8C;AACnD,MAAIC,OAAJ;AACA,SAAO,YAAa;AAAA,sCAATC,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAClB,QAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClBF,MAAAA,OAAO,GAAG,IAAV;AACA,OAACD,SAAD,IAAcF,QAAQ,MAAR,SAAYI,IAAZ,CAAd;AACD,KAHD;;AAIAE,IAAAA,YAAY,CAACH,OAAD,CAAZ;AACAA,IAAAA,OAAO,GAAGI,UAAU,CAACF,KAAD,EAAQJ,KAAR,CAApB;AACAC,IAAAA,SAAS,IAAI,CAACC,OAAd,IAAyBH,QAAQ,MAAR,SAAYI,IAAZ,CAAzB;AACD,GARD;AASD,EAED;AACA;;AACO,SAASI,aAAT,CAAuBC,GAAvB,EAA4B;AACjC,MAAMC,YAAY,GAAG,IAAIC,eAAJ,CAAoBF,GAApB,CAArB;AACA,MAAMG,MAAM,GAAG,EAAf;;AAFiC,6CAGNF,YAAY,CAACG,OAAb,EAHM;AAAA;;AAAA;AAGjC,wDAAmD;AAAA;AAAA,UAAvCC,GAAuC;AAAA,UAAlCC,KAAkC;;AACjD,UAAIH,MAAM,CAACE,GAAD,CAAV,EAAiB;AACf,YAAI,CAACE,KAAK,CAACC,OAAN,CAAcL,MAAM,CAACE,GAAD,CAApB,CAAL,EAAiC;AAC/BF,UAAAA,MAAM,CAACE,GAAD,CAAN,GAAc,CAACF,MAAM,CAACE,GAAD,CAAP,CAAd;AACD;;AACDF,QAAAA,MAAM,CAACE,GAAD,CAAN,CAAYtC,IAAZ,CAAiBuC,KAAjB;AACD,OALD,MAKO;AACLH,QAAAA,MAAM,CAACE,GAAD,CAAN,GAAcC,KAAd;AACD;AACF;AAZgC;AAAA;AAAA;AAAA;AAAA;;AAajC,SAAOH,MAAP;AACD,EAED;;AACO,IAAMM,GAAG,GAAG,SAANA,GAAM;AAAA,uBACV,CAAC,CAAC,IAAIC,IAAJ,EAAD,GAAcC,IAAI,CAACC,MAAL,KAAgB,GAA/B,EAAoCC,QAApC,CAA6C,EAA7C,CADU;AAAA,CAAZ,EAGP;;AACO,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,QAAD,EAAWC,QAAX,EAAwB;AAC1C,MAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC,MAAM,iCAAN;AACpC,SAAO,UAAAE,OAAO,EAAI;AAChB;AACAD,IAAAA,QAAQ,GAAGD,QAAQ,CAACE,OAAD,EAAUD,QAAV,CAAnB;AACA,WAAOA,QAAP;AACD,GAJD;AAKD,CAPM,EASP;;AACO,SAASE,UAAT,CAAoBC,KAApB,EAA2B;AAChC,SAAO,UAAAC,QAAQ,EAAI;AACjB,QAAID,KAAK,KAAKC,QAAd,EAAwB;AACtBD,MAAAA,KAAK,GAAGC,QAAR;AACA,aAAO,KAAP;AACD;;AACD,WAAO,IAAP;AACD,GAND;AAOD,EAED;;AACO,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;AAClC,MAAMC,KAAK,GAAGD,IAAI,CAACE,KAAL,CAAW,GAAX,CAAd;AACA,SACEC,QAAQ,CAACF,KAAK,CAAC,CAAD,CAAN,CAAR,GAAqB,EAArB,GAA0B,EAA1B,GAA+BE,QAAQ,CAACF,KAAK,CAAC,CAAD,CAAN,CAAR,GAAqB,EAApD,GAAyDE,QAAQ,CAACF,KAAK,CAAC,CAAD,CAAN,CADnE;AAGD,EAED;;AACO,SAASG,SAAT,CAAmBC,MAAnB,EAA2BnD,IAA3B,EAAmD;AAAA,MAAlBoD,QAAkB,uEAAP,KAAO;AACxD,MAAMC,QAAQ,GAAGD,QAAQ,GACrBjD,QAAQ,CAACmD,aAAT,6BAA2CtD,IAA3C,aACFG,QAAQ,CAACoD,aAAT,SAFuB,GAGrBpD,QAAQ,CAACoD,aAAT,SAHJ;AAIA,MAAIvD,IAAJ,EAAUqD,QAAQ,CAAC1C,OAAT,CAAiBX,IAAjB,GAAwBA,IAAxB;AACVG,EAAAA,QAAQ,CAACqD,IAAT,CAAcC,WAAd,CAA0BJ,QAA1B,EAAoCK,WAApC,GAAkDP,MAAlD;AACA,SAAOE,QAAP;AACD,EAED;;AACO,SAASM,QAAT,CAAkBhE,KAAlB,EAAyBiE,IAAzB,EAA+B;AACpC,OAAK5D,IAAL,GAAY,UAAZ;;AACA,MAAIL,KAAK,YAAYI,KAArB,EAA4B;AAC1B,SAAK8D,OAAL,GAAelE,KAAK,CAACkE,OAArB;AACA,SAAKC,KAAL,GAAanE,KAAK,CAACmE,KAAnB;AACD,GAHD,MAGO;AACL,SAAKD,OAAL,GAAelE,KAAf;AACA,SAAKmE,KAAL,GAAa,IAAI/D,KAAJ,GAAY+D,KAAzB;AACD;;AAED,MAAIF,IAAJ,EAAU;AACR,SAAKA,IAAL,GAAYA,IAAZ;AACD;AACF;AAEDD,QAAQ,CAACI,SAAT,GAAqB,IAAIhE,KAAJ,EAArB,EAEA;AACA;AACA;AACA;AACA;AACA;;AACO,SAASiE,WAAT,CAAqBC,cAArB,EAAqCC,KAArC,EAA4D;AAAA,MAAhBC,MAAgB,uEAAP,KAAO;AACjEF,EAAAA,cAAc,IAAIA,cAAc,CAACG,SAAf,CAAyBC,GAAzB,CAA6BH,KAA7B,CAAlB;AACA,SAAO,UAAAI,UAAU,EAAI;AACnB,QAAIH,MAAM,IAAIF,cAAV,IAA4BA,cAAc,KAAKK,UAAnD,EAA+D;AAC7DL,MAAAA,cAAc,CAACG,SAAf,CAAyBD,MAAzB,CAAgCD,KAAhC;AACD,KAFD,MAEO;AACLD,MAAAA,cAAc,IAAIA,cAAc,CAACG,SAAf,CAAyBG,MAAzB,CAAgCL,KAAhC,CAAlB;AACAI,MAAAA,UAAU,IAAIA,UAAU,CAACF,SAAX,CAAqBC,GAArB,CAAyBH,KAAzB,CAAd,CAFK,CAGL;;AACAD,MAAAA,cAAc,GAAGK,UAAjB;AACD;;AACD,WAAOL,cAAP;AACD,GAVD;AAWD,EAGD;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGO,SAASO,WAAT,CAAqBC,SAArB,EAAgC1D,QAAhC,EAA+D;AAAA,MAArB2D,WAAqB,uEAAP,KAAO;AAEpE,MAAIC,QAAJ;AAEA,MAAMC,OAAO,GAAG9D,QAAQ,CAAC,YAAM;AAC7B,QAAM+D,WAAW,GAAGxF,MAAM,CAACyF,UAA3B;AACA,QAAMC,YAAY,GAAG1F,MAAM,CAAC2F,WAA5B;;AACA,qBAA2BP,SAAS,CAACI,WAAD,EAAcE,YAAd,CAApC;AAAA,QAAQE,MAAR,cAAQA,MAAR;AAAA,QAAgBC,MAAhB,cAAgBA,MAAhB;;AACA,QAAMC,IAAI,GAAGF,MAAM,GAAG,QAAH,GAAcC,MAAM,GAAG,QAAH,GAAc,SAArD;;AAEA,QAAIP,QAAQ,KAAKQ,IAAjB,EAAuB;AACrBpE,MAAAA,QAAQ,CAACoE,IAAD,EAAOR,QAAQ,KAAKS,SAApB,CAAR;AACAT,MAAAA,QAAQ,GAAGQ,IAAX;AACD;AAEF,GAXuB,EAWrB,GAXqB,CAAxB;AAaAT,EAAAA,WAAW,IAAIE,OAAO,EAAtB;AAEAvF,EAAAA,MAAM,CAACe,gBAAP,CAAwB,QAAxB,EAAkCwE,OAAlC;AACA,SAAO;AAAA,WAAMvF,MAAM,CAACgG,mBAAP,CAA2B,QAA3B,EAAqCT,OAArC,CAAN;AAAA,GAAP;AACD;;CCzJD;AACA;;AAGA,IAAMU,GAAG,GAAG,SAANA,GAAM,CAAAC,gBAAgB;AAAA,0GAMLA,gBANK;AAAA,CAA5B;;AA2Ce,SAASC,WAAT,GAA6C;AAAA,MAAxBD,gBAAwB,uEAAL,GAAK;AAC1D,MAAIE,IAAI,GAAG1D,KAAK,CAAC2D,IAAN,CAAWvF,QAAQ,CAACwF,gBAAT,CAA0B,YAA1B,CAAX,CAAX;AACA,MAAIC,SAAS,GAAGzF,QAAQ,CAACmD,aAAT,CAAuB,qBAAvB,CAAhB;AACA,MAAIuC,UAAU,GAAGJ,IAAI,CAACK,IAAL,CAAU,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAAC3B,SAAF,CAAY4B,QAAZ,CAAqB,QAArB,CAAJ;AAAA,GAAX,CAAjB;AACA,MAAIC,aAAa,GAAGJ,UAAU,GAAG1F,QAAQ,CAACmD,aAAT,kCAAH,GAA8D,IAA5F;AAEAJ,EAAAA,SAAS,CAACoC,GAAG,CAACC,gBAAD,CAAJ,EAAwB,aAAxB,CAAT;AAEAf,EAAAA,WAAW,CACT,UAAA0B,KAAK;AAAA,WAAK;AAAEjB,MAAAA,MAAM,EAAEiB,KAAK,GAAGX;AAAlB,KAAL;AAAA,GADI,EAET,UAAAJ,IAAI;AAAA,WAAIc,aAAa,KAAKd,IAAI,KAAK,QAAT,GACtBc,aAAa,CAAC7B,SAAd,CAAwBG,MAAxB,CAA+B,QAA/B,CADsB,GAEtB0B,aAAa,CAAC7B,SAAd,CAAwBC,GAAxB,CAA4B,QAA5B,CAFiB,CAAjB;AAAA,GAFK,EAKP,IALO,CAAX;;AAQA,WAAS8B,YAAT,GAAwB;AACtBP,IAAAA,SAAS,IAAIA,SAAS,CAACxB,SAAV,CAAoBG,MAApB,CAA2B,MAA3B,CAAb;AACA0B,IAAAA,aAAa,IAAIA,aAAa,CAAC7B,SAAd,CAAwBG,MAAxB,CAA+B,QAA/B,CAAjB;AACD;;AAED,WAAS6B,SAAT,CAAmBC,UAAnB,EAA+BC,MAA/B,EAAuC;AAErCL,IAAAA,aAAa,IAAIA,aAAa,CAAC7B,SAAd,CAAwBG,MAAxB,CAA+B,QAA/B,CAAjB;AACA0B,IAAAA,aAAa,GAAGK,MAAM,YAAYC,WAAlB,GAAgCD,MAAhC,GAAyCnG,QAAQ,CAACmD,aAAT,oCAAkD+C,UAAlD,SAAzD;AAEAR,IAAAA,UAAU,IAAIA,UAAU,CAACzB,SAAX,CAAqBG,MAArB,CAA4B,QAA5B,CAAd;AACAsB,IAAAA,UAAU,GAAGJ,IAAI,CAACK,IAAL,CAAU,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACpF,OAAF,CAAU6F,GAAV,KAAkBH,UAAtB;AAAA,KAAX,CAAb;;AAEA,QAAIR,UAAJ,EAAgB;AACdA,MAAAA,UAAU,CAACzB,SAAX,CAAqBC,GAArB,CAAyB,QAAzB;AACA4B,MAAAA,aAAa,CAAC7B,SAAd,CAAwBC,GAAxB,CAA4B,QAA5B;AACAuB,MAAAA,SAAS,IAAIA,SAAS,CAACxB,SAAV,CAAoBC,GAApB,CAAwB,MAAxB,CAAb;AACD;;AAED,WAAOwB,UAAP;AACD;;AAED1F,EAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,UAAAC,KAAK,EAAI;AAC1C,QAAIA,KAAK,CAACC,MAAN,CAAaC,OAAb,CAAqB,yBAArB,CAAJ,EAAqD;AACnDsF,MAAAA,UAAU,GAAGO,SAAS,CAAC/F,KAAK,CAACC,MAAN,CAAaK,OAAb,CAAqB8F,SAAtB,EAAiCpG,KAAK,CAACC,MAAvC,CAAtB;AACD,KAFD,MAIK,IAAID,KAAK,CAACC,MAAN,CAAaC,OAAb,CAAqB,wBAArB,CAAJ,EAAoD;AACvD4F,MAAAA,YAAY;AACb;AACF,GARD;AAUA,SAAOO,MAAM,CAACC,MAAP,CAAc;AACnBP,IAAAA,SAAS,EAATA,SADmB;AAGnBQ,IAAAA,aAHmB,2BAGH;AACd,aAAOf,UAAP;AACD,KALkB;AAOnBgB,IAAAA,gBAPmB,8BAOA;AACjB,aAAOZ,aAAP;AACD;AATkB,GAAd,CAAP;AAWD;;AC5Gc,SAASa,QAAT,CAAkBC,EAAlB,EAAiD;AAAA,MAA3Bb,KAA2B,uEAAnB,GAAmB;AAAA,MAAdc,MAAc,uEAAL,GAAK;AAC9D,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAIC,MAAJ;AACA,QAAIC,YAAJ;AACA,QAAIC,YAAJ,CAHsC,CAKtC;;AACAjI,IAAAA,MAAM,CAACkI,uBAAP,GAAiC,SAASC,aAAT,GAAyB;AACxD,UAAM5B,SAAS,GAAGzF,QAAQ,CAACsH,cAAT,CAAwBV,EAAxB,CAAlB;;AAEA,UAAI,CAACnB,SAAL,EAAgB;AACd,eAAOuB,MAAM,wCAAgCJ,EAAhC,QAAb;AACD,OALuD,CAOxD;;;AACAK,MAAAA,MAAM,GAAG,IAAIM,EAAE,CAACC,MAAP,CAAcZ,EAAd,EAAkB;AACzBb,QAAAA,KAAK,EAALA,KADyB;AAEzBc,QAAAA,MAAM,EAANA,MAFyB;AAGzBY,QAAAA,OAAO,EAAEhC,SAAS,CAACjF,OAAV,CAAkBkH,OAHF;AAIzBC,QAAAA,UAAU,EAAE;AACVC,UAAAA,GAAG,EAAE,CADK;AAEVC,UAAAA,cAAc,EAAE;AAFN,SAJa;AAQzBC,QAAAA,MAAM,EAAE;AACNC,UAAAA,OAAO,EAAEC,aADH;AAENC,UAAAA,aAAa,EAAEC;AAFT;AARiB,OAAlB,CAAT;AAaD,KArBD,CANsC,CA+BtC;AAEA;;;AACA,aAASF,aAAT,GAAyB;AACvB,UAAMG,MAAM,GAAGnI,QAAQ,CAACmD,aAAT,CAAuB,aAAvB,CAAf;AACAgF,MAAAA,MAAM,IAAIA,MAAM,CAACC,UAAP,CAAkBC,WAAlB,CAA8BF,MAA9B,CAAV,CAFuB,CAIvB;;AACAlB,MAAAA,MAAM,CAACqB,MAAP,GAAgB,UAAA1H,QAAQ,EAAI;AAC1BuG,QAAAA,YAAY,GAAGvG,QAAf;AACD,OAFD;;AAIAqG,MAAAA,MAAM,CAACsB,MAAP,GAAgB,UAAA3H,QAAQ,EAAI;AAC1BsG,QAAAA,YAAY,GAAGtG,QAAf;AACD,OAFD;;AAIAqG,MAAAA,MAAM,CAACuB,UAAP,GAAoB,YAAM;AACxB,YAAMC,iBAAiB,GAAGC,MAAM,CAACD,iBAAP,IAA4BC,MAAM,CAACC,oBAAnC,IAA2DD,MAAM,CAACE,uBAA5F;AACAH,QAAAA,iBAAiB,IAAIA,iBAAiB,CAACI,IAAlB,CAAuBpD,SAAvB,GAArB;AACD,OAHD;;AAKAsB,MAAAA,OAAO,CAACE,MAAD,CAAP;AACD,KArDqC,CAuDtC;;;AACA,aAASiB,iBAAT,CAA2BhI,KAA3B,EAAkC;AAChC,UAAIA,KAAK,CAAC4I,IAAN,KAAe,CAAnB,EAAsB;AACpB5B,QAAAA,YAAY,IAAIA,YAAY,CAAChH,KAAK,CAACC,MAAN,CAAa4I,cAAb,EAAD,CAA5B;AACD,OAFD,MAEO,IAAI7I,KAAK,CAAC4I,IAAN,KAAe,CAAnB,EAAsB;AAC3B3B,QAAAA,YAAY,IAAIA,YAAY,CAACjH,KAAK,CAACC,MAAN,CAAa4I,cAAb,EAAD,CAA5B;AACD;AACF;AACF,GA/DM,CAAP;AAgED;;;;;;ACjED;CAGA;;AACA;CAGA;;AACe,SAASE,MAAT,GAAkB;AAC/B,MAAIC,YAAJ;AACA,MAAMC,SAAS,GAAG,EAAlB;AACA,MAAMpJ,IAAI,GAAGC,QAAQ,CAACmD,aAAT,CAAuB,oBAAvB,KAAgDC,aAAa,CAAC,oBAAD,CAA1E;AAEApD,EAAAA,QAAQ,CAACoJ,IAAT,CAAc9F,WAAd,CAA0BvD,IAA1B,EAL+B,CAO/B;;AACA,MAAMsJ,MAAM,GAAGzH,KAAK,CAAC2D,IAAN,CAAWvF,QAAQ,CAACwF,gBAAT,CAA0B,mBAA1B,CAAX,EACZ8D,MADY,CACL,UAACC,GAAD,EAAMC,KAAN,EAAgB;AACtBD,IAAAA,GAAG,CAACC,KAAK,CAAChJ,OAAN,CAAciJ,QAAf,CAAH,GAA8BD,KAA9B;AACA,QAAME,aAAa,GAAGF,KAAK,CAACrG,aAAN,CAAoB,iBAApB,CAAtB;;AAEA,QAAIuG,aAAJ,EAAmB;AACjB,UAAIV,gBAAJ,CAAqBU,aAArB;AACD;;AACD3J,IAAAA,IAAI,CAACuD,WAAL,CAAiBkG,KAAjB;AACA,WAAOD,GAAP;AACD,GAVY,EAUV,EAVU,CAAf;AAYAvJ,EAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,UAAAC,KAAK,EAAI;AAC1C;AACA,QAAI,CAACA,KAAK,CAACC,MAAN,CAAaK,OAAb,CAAqBmJ,eAA1B,EAA2C;AACzC,UAAIzJ,KAAK,CAACC,MAAN,KAAiBJ,IAAjB,IAAyBG,KAAK,CAACC,MAAN,CAAaK,OAAb,CAAqBoJ,aAAlD,EAAiE;AAC/D7J,QAAAA,IAAI,CAACkE,SAAL,CAAeG,MAAf,CAAsB,WAAtB;;AACA,YAAI8E,YAAJ,EAAkB;AAChBA,UAAAA,YAAY,CAACjF,SAAb,CAAuBG,MAAvB,CAA8B,YAA9B;AACAjD,UAAAA,UAAU,CAAC,YAAM;AACfgI,YAAAA,SAAS,CAACzJ,OAAV,CAAkB,UAAAmK,QAAQ;AAAA,qBACxBA,QAAQ,CAACX,YAAY,CAAC1I,OAAb,CAAqBiJ,QAAtB,EAAgC,MAAhC,EAAwCP,YAAxC,CADgB;AAAA,aAA1B;AAGD,WAJS,EAIP,GAJO,CAAV;AAKD;AACF;;AACD;AACD,KAfyC,CAiB1C;;;AACAA,IAAAA,YAAY,GAAGG,MAAM,CAACnJ,KAAK,CAACC,MAAN,CAAaK,OAAb,CAAqBmJ,eAAtB,CAArB;;AACA,QAAIT,YAAJ,EAAkB;AAChBA,MAAAA,YAAY,CAACjF,SAAb,CAAuBC,GAAvB,CAA2B,YAA3B;AACAnE,MAAAA,IAAI,CAACkE,SAAL,CAAeC,GAAf,CAAmB,WAAnB;AACAiF,MAAAA,SAAS,CAACzJ,OAAV,CAAkB,UAAAmK,QAAQ;AAAA,eACxBA,QAAQ,CAACX,YAAY,CAAC1I,OAAb,CAAqBiJ,QAAtB,EAAgC,MAAhC,EAAwCP,YAAxC,CADgB;AAAA,OAA1B;AAGD;AACF,GA1BD;AA4BA,SAAO;AACLY,IAAAA,MAAM,EAAE,gBAAAlJ,QAAQ,EAAI;AAClB,OAACuI,SAAS,CAACY,QAAV,CAAmBnJ,QAAnB,CAAD,IAAiCuI,SAAS,CAAC/J,IAAV,CAAewB,QAAf,CAAjC;AACA,aAAO,SAASoJ,OAAT,GAAmB;AACxB,YAAMC,KAAK,GAAGd,SAAS,CAACe,OAAV,CAAkBtJ,QAAlB,CAAd;AACAuI,QAAAA,SAAS,CAACgB,MAAV,CAAiBF,KAAjB,EAAwB,CAAxB;AACD,OAHD;AAID;AAPI,GAAP;AASD,EAED;;AACO,SAASG,WAAT,CAAqBC,SAArB,EAAgC;AACrC,MAAMC,CAAC,GAAGtK,QAAQ,CAACmD,aAAT,CAAuB0F,IAAvB,CAA4B7I,QAA5B,CAAV;AACA,MAAMuK,QAAQ,kEAA0DF,SAA1D,QAAd;AACA,MAAMG,OAAO,GAAGF,CAAC,CAACC,QAAD,CAAD,IAAenH,sBAAa,CAACmH,QAAD,CAA5C;AACA,MAAMf,KAAK,GAAGc,CAAC,8BAAsBD,SAAtB,SAAf;AACA,MAAMtK,IAAI,GAAGuK,CAAC,CAAC,oBAAD,CAAd;AAEA,MAAI,CAACvK,IAAD,IAAS,CAACyJ,KAAd,EAAqB;AAErBxJ,EAAAA,QAAQ,CAACoJ,IAAT,CAAc9F,WAAd,CAA0BkH,OAA1B;AACA,SAAO;AACLC,IAAAA,EAAE,EAAE;AAAA,aAAMD,OAAO,CAACE,KAAR,EAAN;AAAA,KADC;AAELC,IAAAA,GAAG,EAAE;AAAA,aAAM5K,IAAI,CAAC2K,KAAL,EAAN;AAAA,KAFA;AAGLlB,IAAAA,KAAK,EAALA;AAHK,GAAP;AAKD;;ACnFc,SAASoB,SAAT,GAAqB;AAClC,MAAIC,QAAJ;AACA,MAAIC,SAAJ;;AAEA,WAASC,cAAT,CAAwBC,aAAxB,EAAuC;AACrCF,IAAAA,SAAS,GAAG/I,IAAI,CAACkJ,GAAL,EAAZ;AACAJ,IAAAA,QAAQ,GAAGG,aAAX;AACD;;AAED,WAASE,aAAT,GAAyB;AACvB,QAAMC,YAAY,GAAGpJ,IAAI,CAACkJ,GAAL,KAAaH,SAAlC;AACA5L,IAAAA,MAAM,CAACkM,SAAP,CAAiBhM,IAAjB,CAAsB;AACpBc,MAAAA,KAAK,EAAE,iBADa;AAEpBmL,MAAAA,SAAS,EAAEC,SAAS,CAACH,YAAD,CAFA;AAGpBI,MAAAA,WAAW,EAAEV;AAHO,KAAtB;AAKD;;AAED7K,EAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,gBAAgB;AAAA,QAAbE,MAAa,QAAbA,MAAa;;AACjD,QAAIA,MAAM,CAACC,OAAP,CAAe,mCAAf,CAAJ,EAAyD;AACvD2K,MAAAA,cAAc,CAAC5K,MAAM,CAACK,OAAP,CAAeqK,QAAhB,CAAd;AACD,KAFD,MAEO,IACL1K,MAAM,CAACC,OAAP,CAAe,oBAAf,KACAD,MAAM,CAACC,OAAP,CAAe,yCAAf,CAFK,EAGL;AACA8K,MAAAA,aAAa;AACd;AACF,GATD;AAWA,SAAO;AACLM,IAAAA,KAAK,EAAE,eAAAC,KAAK;AAAA,aAAIV,cAAc,CAACU,KAAD,CAAlB;AAAA;AADP,GAAP;AAGD,EAED;;AAEA,SAASH,SAAT,CAAmBI,MAAnB,EAA2B;AACzB,MAAMC,OAAO,GAAG3J,IAAI,CAAC4J,KAAL,CAAWF,MAAM,GAAG,KAApB,CAAhB;AACA,MAAMG,OAAO,GAAG,CAAEH,MAAM,GAAG,KAAV,GAAmB,IAApB,EAA0BI,OAA1B,CAAkC,CAAlC,CAAhB;AACA,mBAAUH,OAAO,GAAG,EAAV,GAAe,GAAf,GAAqB,EAA/B,SAAoCA,OAApC,cACEE,OAAO,GAAG,EAAV,GAAe,GAAf,GAAqB,EADvB,SAEGA,OAFH;AAGD;;AC1CD;AACA;AAEA;AACA;AACA;AACA;AAEe,SAASE,eAAT,CAAyB1C,MAAzB,EAAiC;AAC9CA,EAAAA,MAAM,IACJA,MAAM,CAACS,MAAP,CAAc,UAACjK,IAAD,EAAO2C,KAAP,EAAcgH,KAAd,EAAwB;AACpC,QAAI3J,IAAI,KAAK,WAAT,IAAwB2C,KAAK,KAAK,MAAtC,EAA8C;AAC5C,UAAMkG,MAAM,GAAGc,KAAK,CAACrG,aAAN,CAAoB,QAApB,CAAf;AACA,UAAIuF,MAAJ,EAAYA,MAAM,CAACsD,GAAP,GAAa,EAAb;AACb;AACF,GALD,CADF;AAOD;;;AChBD;AACA;AACA;AACA;AACA;AAEA;AAEe,SAASG,SAAT,CAAmB9C,MAAnB,EAA2B;AACxC,uBAAqBjI,aAAa,CAAClC,MAAM,CAACkN,QAAP,CAAgBC,MAAjB,CAAlC;AAAA,MAAQxB,QAAR,kBAAQA,QAAR;;AACA,MAAMyB,eAAe,GAAGlC,WAAW,CAAC,WAAD,CAAnC;AACA,MAAMmC,KAAK,GAAGrN,MAAM,CAACsN,mBAArB;AACA,SAAOtN,MAAM,CAACsN,mBAAd,CAJwC,CAMxC;;AACA,MAAMC,OAAO,GAAG7B,SAAS,EAAzB,CAPwC,CASxC;;AACAsB,EAAAA,eAAO,CAAC7C,MAAD,CAAP,CAVwC,CAYxC;;AACA,MAAIiD,eAAe,CAAC9C,KAAhB,CAAsBhJ,OAAtB,CAA8BkM,KAAlC,EAAyC;AACvC,gCAA2BJ,eAAe,CAAC9C,KAAhB,CAAsBhJ,OAAjD;AAAA,QAAQkM,KAAR,yBAAQA,KAAR;AAAA,QAAeC,OAAf,yBAAeA,OAAf;AACAL,IAAAA,eAAe,CAAC9C,KAAhB,CAAsBlG,WAAtB,CAAkCsJ,aAAa,CAACD,OAAD,EAAUD,KAAV,CAA/C;AACAD,IAAAA,OAAO,CAACjB,KAAR,CAAcmB,OAAd;AACD,GAJD,CAMA;AANA,OAOK,IAAI9B,QAAJ,EAAc;AACjB,0BAA8B0B,KAAK,CAAC1B,QAAD,CAAnC;AAAA,QAAQY,KAAR,mBAAQA,KAAR;AAAA,QAAepK,GAAf,mBAAeA,GAAf;AAAA,QAAoBwL,KAApB,mBAAoBA,KAApB;AACAP,IAAAA,eAAe,CAAC9C,KAAhB,CAAsBlG,WAAtB,CAAkCsJ,aAAa,CAACnB,KAAD,EAAQpK,GAAR,EAAawL,KAAb,CAA/C;AACAP,IAAAA,eAAe,CAAC7B,EAAhB;AACAgC,IAAAA,OAAO,CAACjB,KAAR,CAAcC,KAAd;AACD;AACF;;AAGD,SAASmB,aAAT,CAAuBnB,KAAvB,EAA8BpK,GAA9B,EAAmCwL,KAAnC,EAA0C;AACxC,kBAAwBZ,iBAAQ,qeAAhC;AAAA;AAAA,MAAOa,OAAP;AAAA,MAAgBC,IAAhB,iBADwC,CAYxC;;;AACAA,EAAAA,IAAI,CAAC9F,MAAL,CAAY+E,GAAZ,GAAkB3K,GAAlB;AACA0L,EAAAA,IAAI,CAACC,MAAL,CAAYzJ,WAAZ,GAA0BkI,KAA1B;AACAsB,EAAAA,IAAI,CAACvE,UAAL,CAAgBvI,gBAAhB,CAAiC,OAAjC,EAA0C,YAAM;AAC9C,QAAI6M,OAAO,CAAC1E,UAAR,CAAmBnE,SAAnB,CAA6BD,MAA7B,CAAoC,YAApC,CAAJ,EAAuD;AACrD+I,MAAAA,IAAI,CAACvE,UAAL,CAAgBvE,SAAhB,CAA0BC,GAA1B,CAA8B,yBAA9B;AACA6I,MAAAA,IAAI,CAACvE,UAAL,CAAgBvE,SAAhB,CAA0BG,MAA1B,CAAiC,wBAAjC;AACD,KAHD,MAGO;AACL2I,MAAAA,IAAI,CAACvE,UAAL,CAAgBvE,SAAhB,CAA0BC,GAA1B,CAA8B,wBAA9B;AACA6I,MAAAA,IAAI,CAACvE,UAAL,CAAgBvE,SAAhB,CAA0BG,MAA1B,CAAiC,yBAAjC;AACD;AACF,GARD;;AAUA,MAAIyI,KAAJ,EAAW;AACTE,IAAAA,IAAI,CAACF,KAAL,CAAWtJ,WAAX,+BAA8CsJ,KAA9C;AACD,GAFD,MAEO;AACLE,IAAAA,IAAI,CAACF,KAAL,CAAWzI,MAAX;AACD;;AAED,SAAO0I,OAAP;AACD;;;ACrED;AACA;AACA;AAEe,SAASG,SAAT,CAAmBC,MAAnB,EAA2B;AACxC,MAAMC,aAAa,GAAG;AACpBnI,IAAAA,IAAI,EAAE,MADc;AAEpBoI,IAAAA,MAAM,EAAE,MAFY;AAGpBC,IAAAA,KAAK,EAAE;AAHa,GAAtB;AAMA,MAAMf,eAAe,GAAGlC,WAAW,CAAC,MAAD,CAAnC,CAPwC,CASxC;;AACA,MAAI,CAACkC,eAAD,IAAoB,CAACA,eAAe,CAAC9C,KAAzC,EAAgD;;AAEhD,kBAAwByC,iBAAQ,qLAAhC;AAAA;AAAA,MAAOa,OAAP;AAAA,MAAgBC,IAAhB;;AAMAT,EAAAA,eAAe,CAAC9C,KAAhB,CAAsBlG,WAAtB,CAAkCwJ,OAAlC;AAEA9M,EAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,UAAAC,KAAK,EAAI;AAC1C,QAAI,CAACA,KAAK,CAACC,MAAN,CAAaC,OAAb,CAAqB,sBAArB,CAAL,EAAmD;AAEnD2M,IAAAA,IAAI,CAACO,IAAL,CAAUC,IAAV,aAAoBL,MAApB,mCAAmDhN,KAAK,CAACC,MAAN,CAAaqN,SAAhE,EAH0C,CAK1C;;AACAlB,IAAAA,eAAe,CAAC7B,EAAhB,GAN0C,CAQ1C;;AACA,QAAMgD,KAAK,GAAGtM,UAAU,CAAC,YAAM;AAC7B4L,MAAAA,IAAI,CAACD,OAAL,CAAavJ,WAAb,GAA2B,0BAA3B;AACD,KAFuB,EAErB,GAFqB,CAAxB;AAIAmK,IAAAA,KAAK,WAAIR,MAAJ,qCAAqChN,KAAK,CAACC,MAAN,CAAaK,OAAb,CAAqBmN,MAA1D,GAAoER,aAApE,CAAL,CACGS,IADH,CACQ,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,KADT,EAEGF,IAFH,CAEQ,gBAAuC;AAAA,UAApCG,KAAoC,QAApCA,KAAoC;AAAA,UAA7BlO,IAA6B,QAA7BA,IAA6B;AAAA,UAAvBmO,OAAuB,QAAvBA,OAAuB;AAAA,UAAdC,OAAc,QAAdA,OAAc;AAC3C/M,MAAAA,YAAY,CAACuM,KAAD,CAAZ;AACAV,MAAAA,IAAI,CAACD,OAAL,CAAaoB,SAAb,8JAGchO,KAAK,CAACC,MAAN,CAAaqN,SAH3B,mKAMuBN,MANvB,2LAW6BrN,IAX7B,sJAgBmCmO,OAhBnC,sJAoBmCD,KApBnC,+IAwBmCE,OAxBnC,+DAF2C,CA8B3C;;AACA/O,MAAAA,MAAM,CAACiP,OAAP,IAAkBjP,MAAM,CAACiP,OAAP,CAAeC,OAAf,EAAlB;AACD,KAlCH,WAmCS,UAAAC,GAAG,EAAI;AACZ5O,MAAAA,OAAO,CAACD,KAAR,CAAc6O,GAAd;AACAnN,MAAAA,YAAY,CAACuM,KAAD,CAAZ;AACAV,MAAAA,IAAI,CAACD,OAAL,CAAavJ,WAAb,GAA2B,iCAA3B;AACD,KAvCH;AAwCD,GArDD;AAsDD;;;AC9ED;CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACe,SAAS+K,WAAT,CAAqB/D,QAArB,EAA+B;AAC5C,MAAMxK,IAAI,GACRwK,QAAQ,YAAYnE,WAApB,GACImE,QADJ,GAEIvK,QAAQ,CAACmD,aAAT,CAAuBoH,QAAvB,CAHN;AAIA,MAAMgE,QAAQ,GAAG,EAAjB;;AAEA,WAASC,SAAT,CAAmBtO,KAAnB,EAA0B;AACxB,QAAI,CAACuO,aAAa,CAACvO,KAAK,CAACC,MAAP,CAAlB,EAAkC;;AAClC,gCAA2BuO,wBAAwB,CAACxO,KAAK,CAACC,MAAN,CAAaoN,IAAd,CAAnD;AAAA;AAAA,QAAOS,OAAP;AAAA,QAAgBW,OAAhB;;AACAJ,IAAAA,QAAQ,CAACP,OAAD,CAAR,IAAqBO,QAAQ,CAACP,OAAD,CAAR,CAAkBW,OAAlB,EAA2BzO,KAAK,CAACC,MAAjC,CAArB;AACAD,IAAAA,KAAK,CAAC0O,cAAN;AACD;;AAED7O,EAAAA,IAAI,IAAIA,IAAI,CAACE,gBAAL,CAAsB,OAAtB,EAA+BuO,SAA/B,CAAR;AAEA,SAAO;AACL,aAAO,gBAACR,OAAD,EAAUpN,QAAV,EAAuB;AAC5B,UAAK,OAAOoN,OAAP,KAAmB,QAAnB,EAA6B,OAAOpN,QAAP,KAAoB,UAAtD,EAAmE;AACjE2N,QAAAA,QAAQ,CAACP,OAAD,CAAR,GAAoBpN,QAApB;AACD;AACF,KALI;AAMLiO,IAAAA,OAAO,EAAE,mBAAM;AACb9O,MAAAA,IAAI,IAAIA,IAAI,CAACmF,mBAAL,CAAyB,OAAzB,EAAkCsJ,SAAlC,CAAR;AACAjI,MAAAA,MAAM,CAACuI,IAAP,CAAYP,QAAZ,EAAsB7O,OAAtB,CAA8B,UAAAgC,GAAG;AAAA,eAAI,OAAO6M,QAAQ,CAAC7M,GAAD,CAAnB;AAAA,OAAjC;AACD;AATI,GAAP;AAWD,EAED;;AAEA,SAAS+M,aAAT,CAAuBM,OAAvB,EAAgC;AAC9B,SAAOA,OAAO,CAACC,QAAR,KAAqB,GAArB,IAA4BD,OAAO,CAACxB,IAApC,IAA4CwB,OAAO,CAACxB,IAAR,CAAaxD,QAAb,CAAsB,GAAtB,CAAnD;AACD;;AAED,SAAS2E,wBAAT,CAAkCnB,IAAlC,EAAwC;AACtC,MAAMtD,KAAK,GAAGsD,IAAI,CAACrD,OAAL,CAAa,GAAb,CAAd;AACA,MAAM+E,MAAM,GAAG1B,IAAI,CAAC2B,KAAL,CAAWjF,KAAK,GAAG,CAAnB,EAAsBpH,KAAtB,CAA4B,GAA5B,CAAf;AACA,MAAM8L,OAAO,GAAGM,MAAM,CAAC,CAAD,CAAN,GAAY7N,aAAa,YAAK6N,MAAM,CAAC,CAAD,CAAX,EAAzB,GAA6ChK,SAA7D;AACA,SAAO,CAACgK,MAAM,CAAC,CAAD,CAAP,EAAYN,OAAZ,CAAP;AACD;;ACvDD;CAGA;AACA;;AACe,SAASQ,UAAT,CAAoBlI,MAApB,EAA4B;AACzC,MAAMmI,iBAAiB,GAAGpP,QAAQ,CAACmD,aAAT,CAAuB,sBAAvB,CAA1B,CADyC,CAGzC;;AACA,MAAI,CAAC8D,MAAD,IAAW,CAACmI,iBAAhB,EAAmC;AACjC;AACD;;AAED,MAAMC,eAAe,GAAGf,WAAW,CAACc,iBAAD,CAAnC;AAEA,MAAME,KAAK,GAAGC,WAAW,CACvBC,oBAAoB,CAACJ,iBAAD,CADG,EAEvBA,iBAFuB,CAAzB,CAVyC,CAezC;;AACAC,EAAAA,eAAe,SAAf,CAAsB,MAAtB,EAA8B,UAAAV,OAAO,EAAI;AACvC1H,IAAAA,MAAM,CAACwI,MAAP,CAAc/M,aAAa,CAACiM,OAAO,CAAChM,IAAT,CAA3B;AACAsE,IAAAA,MAAM,CAACyI,SAAP;AACD,GAHD;AAKAzI,EAAAA,MAAM,CAACqB,MAAP,CAAc;AAAA,WAAMgH,KAAK,CAACK,IAAN,EAAN;AAAA,GAAd;AACA1I,EAAAA,MAAM,CAACsB,MAAP,CAAc,UAAA5F,IAAI;AAAA,WAAI2M,KAAK,CAACM,IAAN,CAAW5N,IAAI,CAAC4J,KAAL,CAAWjJ,IAAX,CAAX,CAAJ;AAAA,GAAlB,EAtByC,CAwBzC;;AACA,WAAS6M,oBAAT,CAA8BzP,IAA9B,EAAoC;AAClC,WAAO6B,KAAK,CAAC2D,IAAN,CAAWxF,IAAI,CAACyF,gBAAL,CAAsB,GAAtB,CAAX,EAAuC8D,MAAvC,CAA8C,UAACC,GAAD,EAAM+D,IAAN,EAAe;AAClE,UAAM3K,IAAI,GAAGD,aAAa,CAAC4K,IAAI,CAACC,IAAL,CAAU2B,KAAV,CAAgB,CAAC,CAAjB,CAAD,CAA1B;AACA3F,MAAAA,GAAG,CAAC5G,IAAD,CAAH,GAAY2K,IAAZ;AACA,aAAO/D,GAAP;AACD,KAJM,EAIJ,EAJI,CAAP;AAKD,GA/BwC,CAiCzC;;;AACA,WAASgG,WAAT,CAAqBM,SAArB,EAAgC/C,OAAhC,EAAyC;AACvC,QAAIW,KAAJ,CADuC,CAGvC;AACA;AACA;AACA;;AACA,QAAIqC,MAAM,GAAGD,SAAS,CAAC,CAAD,CAAtB;AACAC,IAAAA,MAAM,IAAIA,MAAM,CAAC7L,SAAP,CAAiBC,GAAjB,CAAqB,QAArB,CAAV,CARuC,CAUvC;;AACA,WAAO;AACL0L,MAAAA,IAAI,EAAE,cAAAG,QAAQ,EAAI;AAChB,YAAIpN,IAAI,GAAGoN,QAAX;AACAD,QAAAA,MAAM,IAAInN,IAAI,KAAK,CAAnB,IAAwBmN,MAAM,CAAC7L,SAAP,CAAiBG,MAAjB,CAAwB,QAAxB,CAAxB;AACAqJ,QAAAA,KAAK,IAAIuC,aAAa,CAACvC,KAAD,CAAtB;AACAA,QAAAA,KAAK,GAAGwC,WAAW,CAAC,YAAM;AACxBtN,UAAAA,IAAI,IAAI,CAAR;;AACA,cAAIkN,SAAS,CAAClN,IAAD,CAAb,EAAqB;AACnBmN,YAAAA,MAAM,IAAIA,MAAM,CAAC7L,SAAP,CAAiBG,MAAjB,CAAwB,QAAxB,CAAV;AACA0L,YAAAA,MAAM,GAAGD,SAAS,CAAClN,IAAD,CAAlB;AACAmN,YAAAA,MAAM,CAAC7L,SAAP,CAAiBC,GAAjB,CAAqB,QAArB;AACA4I,YAAAA,OAAO,CAACoD,SAAR,GAAoBJ,MAAM,CAACK,SAA3B;AACD;AACF,SARkB,EAQhB,IARgB,CAAnB;AASD,OAdI;AAgBLR,MAAAA,IAAI,EAAE,gBAAM;AACVlC,QAAAA,KAAK,IAAIuC,aAAa,CAACvC,KAAD,CAAtB;AACD;AAlBI,KAAP;AAoBD;;AAAA;AACF;;;;ACvED;AACA;AACA;AACA;AACA;AACA;AACA;CAGA;;AACA;AAEA3O,sBAAA;AAAA,6FAAW,iBAAsBwR,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAEDC,YAAAA,MAFC,GAEkBD,KAFlB,CAEDC,MAFC,EAEOlH,MAFP,GAEkBiH,KAFlB,CAEOjH,MAFP,EAIT;;AACAhE,YAAAA,WAAW,CAAC,GAAD,CAAX,CALS,CAOT;;AACAgL,YAAAA,SAAS,CAACE,MAAD,CAAT,CARS,CAUT;;AAVS;AAAA,mBAWoB5J,QAAQ,CAAC,UAAD,CAAR,UAA2B;AAAA,qBAAM,KAAN;AAAA,aAA3B,CAXpB;;AAAA;AAWH6J,YAAAA,cAXG;AAYTrB,YAAAA,UAAU,CAACqB,cAAD,CAAV,CAZS,CAcT;;AACArE,YAAAA,SAAS,CAAC9C,MAAD,CAAT,CAfS,CAiBT;;AACA+G,YAAAA,QAAQ,GAlBC,CAoBT;;AACMK,YAAAA,QArBG,GAqBQzQ,QAAQ,CAACmD,aAAT,CAAuB,sBAAvB,CArBR;;AAsBT,gBAAIsN,QAAJ,EAAc;AACZ,kBAAIzH,oCAAJ,CAAqByH,QAArB;AACMC,cAAAA,UAFM,GAEOD,QAAQ,CAACtN,aAAT,CAAuB,WAAvB,CAFP;AAGZuN,cAAAA,UAAU,KAAKD,QAAQ,CAACP,SAAT,GAAqBQ,UAAU,CAACP,SAAX,GAAuB,EAAjD,CAAV;AACD;;AA1BQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAX;;AAAA,WAA0B3I,MAA1B;AAAA;AAAA;;AAAA,SAA0BA,MAA1B;AAAA;;;;;;UCZA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;;;;;WCAA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEhDA;UACA;UACA;UACA;UACA","sources":["webpack://pi-stacja-template/./src/modules/pistacja/plugin/index.js","webpack://pi-stacja-template/./src/modules/data-copy/index.js","webpack://pi-stacja-template/./src/modules/utils/index.js","webpack://pi-stacja-template/./src/modules/tabs-manager/index.js","webpack://pi-stacja-template/./src/joomla/html/com_videos/item/default/player/modules/yt-player/index.js","webpack://pi-stacja-template/./src/modules/pistacja/modals/index.js","webpack://pi-stacja-template/./src/joomla/html/com_videos/item/default/player/modules/exercises/analytics.js","webpack://pi-stacja-template/./src/joomla/html/com_videos/item/default/player/modules/exercises/cleaner.js","webpack://pi-stacja-template/./src/joomla/html/com_videos/item/default/player/modules/exercises/index.js","webpack://pi-stacja-template/./src/modules/pistacja/uspp-modal/index.js","webpack://pi-stacja-template/./src/modules/anchor-catch/index.js","webpack://pi-stacja-template/./src/joomla/html/com_videos/item/default/player/modules/transcript/index.js","webpack://pi-stacja-template/./src/joomla/html/com_videos/item/default/player/player.js","webpack://pi-stacja-template/webpack/bootstrap","webpack://pi-stacja-template/webpack/runtime/chunk loaded","webpack://pi-stacja-template/webpack/runtime/compat get default export","webpack://pi-stacja-template/webpack/runtime/define property getters","webpack://pi-stacja-template/webpack/runtime/hasOwnProperty shorthand","webpack://pi-stacja-template/webpack/runtime/runtimeId","webpack://pi-stacja-template/webpack/runtime/jsonp chunk loading","webpack://pi-stacja-template/webpack/before-startup","webpack://pi-stacja-template/webpack/startup","webpack://pi-stacja-template/webpack/after-startup"],"sourcesContent":["// Pi-stacja plugins system.\r\nconst pie = (function piePlugin() {\r\n  function plugin(pluginCallback) {\r\n    window.piePlugins = window.piePlugins || [];\r\n    window.piePlugins.push(pluginCallback);\r\n  }\r\n\r\n  function init(userConfig) {\r\n    let config = {};\r\n\r\n    try {\r\n      config = userConfig();\r\n    } catch (error) {\r\n      console.error(\r\n        \"Pistacja Error: Problems with initial configuration.\\n\",\r\n        error\r\n      );\r\n    }\r\n\r\n    window.piePlugins = window.piePlugins || [];\r\n    window.piePlugins.forEach(async callPlugin => {\r\n      if (typeof callPlugin !== \"function\") {\r\n        throw new Error(\"Plugin need to be a function\");\r\n      }\r\n      try {\r\n        await callPlugin(config);\r\n      } catch (error) {\r\n        console.error(`Plugin ${callPlugin.name} erron.\\n`, error);\r\n      }\r\n    });\r\n    delete window.piePlugins;\r\n  }\r\n\r\n  return { plugin, init };\r\n})();\r\n\r\nexport default pie;\r\n","export default function dataCopy(root = document) {\r\n  // Handle links sharing.\r\n  root.addEventListener(\"click\", event => {\r\n    if (event.target.matches(\"button[data-copy]\")) {\r\n      navigator.clipboard.writeText(event.target.dataset.copy);\r\n      alert(`SKOPIOWANO URL:\\n${event.target.dataset.copy}\\nðŸ˜„ðŸ‘`);\r\n    }\r\n  });\r\n}","// Debounce (delay) callback fn.\r\nexport function debounce(callback, delay, immediate) {\r\n  let timeout;\r\n  return (...args) => {\r\n    const later = () => {\r\n      timeout = null;\r\n      !immediate && callback(...args);\r\n    };\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, delay);\r\n    immediate && !timeout && callback(...args);\r\n  };\r\n}\r\n\r\n// Extract search query from URL and parse it into JS object.\r\n// Returns: {} OR {key:value, ...};\r\nexport function queryToObject(url) {\r\n  const searchParams = new URLSearchParams(url);\r\n  const result = {};\r\n  for (const [key, value] of searchParams.entries()) {\r\n    if (result[key]) {\r\n      if (!Array.isArray(result[key])) {\r\n        result[key] = [result[key]]\r\n      }\r\n      result[key].push(value);\r\n    } else {\r\n      result[key] = value;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n// Geerate unique id.\r\nexport const uid = () =>\r\n  `PIE.${(+new Date() + Math.random() * 100).toString(32)}`;\r\n\r\n// Modifier function with memory.\r\nexport const memo = (modifier, previous) => {\r\n  if (typeof modifier !== \"function\") throw \"Modifier need to be a function.\";\r\n  return current => {\r\n    // NOTE: To memoize previous value you need to return it from the 'modifier'.\r\n    previous = modifier(current, previous);\r\n    return previous;\r\n  };\r\n};\r\n\r\n// Memoize prev. value.\r\nexport function isPrevious(state) {\r\n  return newState => {\r\n    if (state !== newState) {\r\n      state = newState;\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n}\r\n\r\n// Translate clock time notation into seconds.\r\nexport function timeToSeconds(time) {\r\n  const parts = time.split(\":\");\r\n  return (\r\n    parseInt(parts[0]) * 60 * 60 + parseInt(parts[1]) * 60 + parseInt(parts[2])\r\n  );\r\n}\r\n\r\n// Add <style> tag into Document's head.\r\nexport function insertCSS(styles, name, override = false) {\r\n  const styleTag = override\r\n    ? document.querySelector(`style[data-name=\"${name}\"]`) ||\r\n    document.createElement(`style`)\r\n    : document.createElement(`style`);\r\n  if (name) styleTag.dataset.name = name;\r\n  document.head.appendChild(styleTag).textContent = styles;\r\n  return styleTag;\r\n}\r\n\r\n// Create pistacja Error instance.\r\nexport function PieError(error, host) {\r\n  this.name = \"PieError\";\r\n  if (error instanceof Error) {\r\n    this.message = error.message;\r\n    this.stack = error.stack;\r\n  } else {\r\n    this.message = error;\r\n    this.stack = new Error().stack;\r\n  }\r\n\r\n  if (host) {\r\n    this.host = host;\r\n  }\r\n}\r\n\r\nPieError.prototype = new Error();\r\n\r\n// Toggles given @klass on given @newElement removing its from the previouse one.\r\n// USAGE:\r\n// const avtivate = memoElement(htmlElement, \"avtive\");\r\n// ...\r\n// avtivate(newHtmlElement);\r\n//\r\nexport function memoElement(currentElement, klass, toggle = false) {\r\n  currentElement && currentElement.classList.add(klass);\r\n  return newElement => {\r\n    if (toggle && currentElement && currentElement === newElement) {\r\n      currentElement.classList.toggle(klass);\r\n    } else {\r\n      currentElement && currentElement.classList.remove(klass);\r\n      newElement && newElement.classList.add(klass);\r\n      // eslint-disable-next-line no-param-reassign\r\n      currentElement = newElement;\r\n    }\r\n    return currentElement;\r\n  };\r\n}\r\n\r\n\r\n// Runs callback only id screen mode changes.\r\n// USAGE:\r\n/*\r\n\r\nimport { watchScreen } from \"utils\";\r\n. . .\r\n\r\nwatchScreen(width => ({ \r\n  mobile: width < 450, \r\n  tablet: width < 860 && width >= 450,\r\n}), \r\n  (mode, isInitail) => console.log(mode, isInitail), \r\n  true\r\n);\r\n\r\n*/\r\n\r\n\r\nexport function watchScreen(predicate, callback, emmitOnInit = false) {\r\n\r\n  let prevMode;\r\n\r\n  const handler = debounce(() => {\r\n    const screenWidth = window.innerWidth;\r\n    const screenHeight = window.innerHeight;\r\n    const { mobile, tablet } = predicate(screenWidth, screenHeight);\r\n    const mode = mobile ? \"mobile\" : tablet ? \"tablet\" : \"desktop\";\r\n\r\n    if (prevMode !== mode) {\r\n      callback(mode, prevMode === undefined);\r\n      prevMode = mode;\r\n    }\r\n\r\n  }, 450);\r\n\r\n  emmitOnInit && handler();\r\n\r\n  window.addEventListener(\"resize\", handler);\r\n  return () => window.removeEventListener(\"resize\", handler);\r\n} ","import { watchScreen, insertCSS } from \"utils\";\r\n\r\n// Switches tabs containers and applies active class.\r\n// USAGE:\r\n\r\n\r\nconst css = mobileBreakpoint => `\r\n  \r\n  .pie-tabs-hide-on-desktop {\r\n    display: none;\r\n  }\r\n  \r\n  @media (max-width: ${mobileBreakpoint}px) {\r\n    .pie-tabs-container {\r\n      top: 100%;     \r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      margin: 0;\r\n      z-index: 100;\r\n      position: fixed;\r\n      overflow-y: auto;\r\n      overflow-x: hidden;\r\n      background-color: white;\r\n      transition: top .5s ease;\r\n    }\r\n      \r\n    .pie-tabs-container.show {\r\n      top: 3.4rem;\r\n    } \r\n\r\n    .pie-tabs-hide-on-mobile {\r\n      display: none;\r\n    }\r\n\r\n    .pie-tabs-hide-on-desktop {\r\n      display: flex;\r\n    }\r\n  }\r\n\r\n  .pie-tabs-container > *[data-tab] {\r\n    display: none;\r\n  }\r\n\r\n  .pie-tabs-container > *[data-tab].active {\r\n    display: block;\r\n  }      \r\n`;\r\n\r\nexport default function TabsManager(mobileBreakpoint = 860) {\r\n  let tabs = Array.from(document.querySelectorAll(\"[data-tab]\"));\r\n  let container = document.querySelector(\".pie-tabs-container\");\r\n  let currentTab = tabs.find(t => t.classList.contains(\"active\"));\r\n  let currentButton = currentTab ? document.querySelector(`button[data-tab-target].active`) : null;\r\n\r\n  insertCSS(css(mobileBreakpoint), \"tabs-styles\");\r\n\r\n  watchScreen(\r\n    width => ({ mobile: width < mobileBreakpoint }),\r\n    mode => currentButton && (mode === \"mobile\"\r\n      ? currentButton.classList.remove(\"active\")\r\n      : currentButton.classList.add(\"active\"))\r\n    , true\r\n  );\r\n\r\n  function deselectTabs() {\r\n    container && container.classList.remove(\"show\");\r\n    currentButton && currentButton.classList.remove(\"active\");\r\n  }\r\n\r\n  function selectTab(targetName, button) {\r\n\r\n    currentButton && currentButton.classList.remove(\"active\");\r\n    currentButton = button instanceof HTMLElement ? button : document.querySelector(`button[data-tab-target=\"${targetName}\"]`);\r\n\r\n    currentTab && currentTab.classList.remove(\"active\");\r\n    currentTab = tabs.find(t => t.dataset.tab === targetName);\r\n\r\n    if (currentTab) {\r\n      currentTab.classList.add(\"active\");\r\n      currentButton.classList.add(\"active\");\r\n      container && container.classList.add(\"show\");\r\n    }\r\n\r\n    return currentTab;\r\n  }\r\n\r\n  document.addEventListener(\"click\", event => {\r\n    if (event.target.matches(\"button[data-tab-target]\")) {\r\n      currentTab = selectTab(event.target.dataset.tabTarget, event.target);\r\n    }\r\n\r\n    else if (event.target.matches(\"button[data-tab-close]\")) {\r\n      deselectTabs();\r\n    }\r\n  });\r\n\r\n  return Object.freeze({\r\n    selectTab,\r\n\r\n    getCurrentTab() {\r\n      return currentTab;\r\n    },\r\n\r\n    getCurrentButton() {\r\n      return currentButton;\r\n    },\r\n  });\r\n}\r\n","export default function YTPlayer(id, width = 560, height = 315) {\r\n  return new Promise((resolve, reject) => {\r\n    let player;\r\n    let playCallback;\r\n    let stopCallback;\r\n\r\n    // Run when YouTube player is ready.\r\n    window.onYouTubePlayerAPIReady = function YTPlayerReady() {\r\n      const container = document.getElementById(id);\r\n\r\n      if (!container) {\r\n        return reject(`No container found for id: \"${id}\"`);\r\n      }\r\n\r\n      // eslint-disable-next-line\r\n      player = new YT.Player(id, {\r\n        width,\r\n        height,\r\n        videoId: container.dataset.videoid,\r\n        playerVars: {\r\n          rel: 0,\r\n          modestbranding: 1,\r\n        },\r\n        events: {\r\n          onReady: playerIsReady,\r\n          onStateChange: playerStateChange,\r\n        },\r\n      });\r\n    };\r\n\r\n\r\n\r\n    // sandbox=\"allow-forms allow-scripts allow-pointer-lock allow-same-origin allow-top-navigation\"\r\n\r\n    // Remove pistacja loader.\r\n    function playerIsReady() {\r\n      const loader = document.querySelector(\".pie-loader\");\r\n      loader && loader.parentNode.removeChild(loader);\r\n\r\n      // Attach handlers.\r\n      player.onStop = callback => {\r\n        stopCallback = callback;\r\n      };\r\n\r\n      player.onPlay = callback => {\r\n        playCallback = callback;\r\n      };\r\n\r\n      player.fullscreen = () => {\r\n        const requestFullScreen = iframe.requestFullScreen || iframe.mozRequestFullScreen || iframe.webkitRequestFullScreen;\r\n        requestFullScreen && requestFullScreen.bind(container)();\r\n      };\r\n\r\n      resolve(player);\r\n    }\r\n\r\n    // Handle player's state change.\r\n    function playerStateChange(event) {\r\n      if (event.data === 1) {\r\n        playCallback && playCallback(event.target.getCurrentTime());\r\n      } else if (event.data === 2) {\r\n        stopCallback && stopCallback(event.target.getCurrentTime());\r\n      }\r\n    }\r\n  });\r\n}\r\n","import { createElement } from \"travrs\";\r\nimport PerfectScrollbar from \"perfect-scrollbar\";\r\n\r\n// Styles.\r\nimport \"perfect-scrollbar/css/perfect-scrollbar.css\";\r\nimport \"./styles.scss\";\r\n\r\n// Handles all pi-stacja modals.\r\nexport default function Modals() {\r\n  let currentModal;\r\n  const listeners = [];\r\n  const root = document.querySelector(\"div.pie-modal-root\") || createElement(\"div.pie-modal-root\");\r\n\r\n  document.body.appendChild(root);\r\n\r\n  // Get all modals from the page.\r\n  const modals = Array.from(document.querySelectorAll(\"*[data-pie-modal]\"))\r\n    .reduce((acc, modal) => {\r\n      acc[modal.dataset.pieModal] = modal;\r\n      const scrollContent = modal.querySelector(\".scroll-content\");\r\n\r\n      if (scrollContent) {\r\n        new PerfectScrollbar(scrollContent);\r\n      }\r\n      root.appendChild(modal);\r\n      return acc;\r\n    }, {});\r\n\r\n  document.addEventListener(\"click\", event => {\r\n    // Hide.\r\n    if (!event.target.dataset.pieModalTrigger) {\r\n      if (event.target === root || event.target.dataset.pieModalClose) {\r\n        root.classList.remove(\"root-open\");\r\n        if (currentModal) {\r\n          currentModal.classList.remove(\"modal-open\");\r\n          setTimeout(() => {\r\n            listeners.forEach(listener =>\r\n              listener(currentModal.dataset.pieModal, \"hide\", currentModal)\r\n            );\r\n          }, 350);\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Select & show.\r\n    currentModal = modals[event.target.dataset.pieModalTrigger];\r\n    if (currentModal) {\r\n      currentModal.classList.add(\"modal-open\");\r\n      root.classList.add(\"root-open\");\r\n      listeners.forEach(listener =>\r\n        listener(currentModal.dataset.pieModal, \"show\", currentModal)\r\n      );\r\n    }\r\n  });\r\n\r\n  return {\r\n    listen: callback => {\r\n      !listeners.includes(callback) && listeners.push(callback);\r\n      return function cleanup() {\r\n        const index = listeners.indexOf(callback);\r\n        listeners.splice(index, 1);\r\n      };\r\n    },\r\n  };\r\n}\r\n\r\n// Allows for remote controll of targeted modal from JS code.\r\nexport function remoteModal(modalName) {\r\n  const $ = document.querySelector.bind(document);\r\n  const selector = `button.remote-pie-modal-btn[data-pie-modal-trigger=\"${modalName}\"]`;\r\n  const trigger = $(selector) || createElement(selector);\r\n  const modal = $(`*[data-pie-modal=\"${modalName}\"]`);\r\n  const root = $(\"div.pie-modal-root\");\r\n\r\n  if (!root || !modal) return;\r\n\r\n  document.body.appendChild(trigger);\r\n  return {\r\n    on: () => trigger.click(),\r\n    off: () => root.click(),\r\n    modal,\r\n  };\r\n}\r\n","export default function analytics() {\r\n  let exercise;\r\n  let startTime;\r\n\r\n  function startRecording(exerciseTitle) {\r\n    startTime = Date.now();\r\n    exercise = exerciseTitle;\r\n  }\r\n\r\n  function stopRecording() {\r\n    const timeEllapsed = Date.now() - startTime;\r\n    window.dataLayer.push({\r\n      event: \"player-exercise\",\r\n      timeValue: humanTime(timeEllapsed),\r\n      customValue: exercise,\r\n    });\r\n  }\r\n\r\n  document.addEventListener(\"click\", ({ target }) => {\r\n    if (target.matches(\"button.pie-player-playlist-button\")) {\r\n      startRecording(target.dataset.exercise);\r\n    } else if (\r\n      target.matches(\"div.pie-modal-root\") ||\r\n      target.matches(\"button.pie-player-exercises-modal-close\")\r\n    ) {\r\n      stopRecording();\r\n    }\r\n  });\r\n\r\n  return {\r\n    start: title => startRecording(title),\r\n  };\r\n}\r\n\r\n// ---- Helpers ----------------\r\n\r\nfunction humanTime(millis) {\r\n  const minutes = Math.floor(millis / 60000);\r\n  const seconds = ((millis % 60000) / 1000).toFixed(0);\r\n  return `${minutes < 10 ? \"0\" : \"\"}${minutes}:${\r\n    seconds < 10 ? \"0\" : \"\"\r\n  }${seconds}`;\r\n}\r\n","// Module that handles exercise popup close event and makes sure to reset iframe \"src\"\r\n// This is mainly for the video players to stop them form playing when modal is closed.\r\n\r\n// FIXME: This need to be changed. It can only handle the exercises assigned to the video\r\n//        it won't work with exercises in playlist that are interactive-video.\r\n//        Solution for that would be actualt acces the player instance and stop move\r\n//        instead forcing rsc reset.\r\n\r\nexport default function exerciseCleaner(modals) {\r\n  modals &&\r\n    modals.listen((name, state, modal) => {\r\n      if (name === \"exercises\" && state === \"hide\") {\r\n        const iframe = modal.querySelector(\"iframe\");\r\n        if (iframe) iframe.src = \"\";\r\n      }\r\n    });\r\n}\r\n","import { template } from \"travrs\";\r\nimport { queryToObject } from \"utils\";\r\nimport { remoteModal } from \"pistacja/modals\";\r\nimport analytics from \"./analytics\";\r\nimport cleaner from \"./cleaner\";\r\n\r\nimport \"./styles.scss\";\r\n\r\nexport default function Exercises(modals) {\r\n  const { exercise } = queryToObject(window.location.search);\r\n  const modalController = remoteModal(\"exercises\");\r\n  const model = window.pie_video_exercises;\r\n  delete window.pie_video_exercises;\r\n\r\n  // Initialize Analytics for exercises.\r\n  const tracker = analytics();\r\n\r\n  // Install Exercise cleaner.\r\n  cleaner(modals);\r\n\r\n  // For Exercises in playlist.\r\n  if (modalController.modal.dataset.exUrl) {\r\n    const { exUrl, exTitle } = modalController.modal.dataset;\r\n    modalController.modal.appendChild(videoExercise(exTitle, exUrl));\r\n    tracker.start(exTitle);\r\n  }\r\n\r\n  // For Exercises in video (URL).\r\n  else if (exercise) {\r\n    const { title, url, video } = model[exercise];\r\n    modalController.modal.appendChild(videoExercise(title, url, video));\r\n    modalController.on();\r\n    tracker.start(title);\r\n  }\r\n}\r\n\r\n\r\nfunction videoExercise(title, url, video) {\r\n  const [content, refs] = template(`\r\n    div.pie-player-exercises-modal-container.stack.--medium\r\n      div.rail.--h-spread.--stretch\r\n        @header::h2.KGSolid.text-green.font-xl > \"Zadanie\"\r\n        div.rail.--zero\r\n          @fullscreen::button.pie-icon-fullscreen-18\r\n          button.pie-player-exercises-modal-close.pie-icon-close-18[data-pie-modal-close=\"true\"]\r\n      @video::div.subheader\r\n      @player::iframe[width=\"100%\" height=\"100%\" scrolling=\"yes\" frameborder=\"0\" allowfullscreen]\r\n    `);\r\n\r\n  // Set content.\r\n  refs.player.src = url;\r\n  refs.header.textContent = title;\r\n  refs.fullscreen.addEventListener(\"click\", () => {\r\n    if (content.parentNode.classList.toggle(\"fullscreen\")) {\r\n      refs.fullscreen.classList.add(\"pie-icon-smallscreen-18\");\r\n      refs.fullscreen.classList.remove(\"pie-icon-fullscreen-18\");\r\n    } else {\r\n      refs.fullscreen.classList.add(\"pie-icon-fullscreen-18\");\r\n      refs.fullscreen.classList.remove(\"pie-icon-smallscreen-18\");\r\n    }\r\n  });\r\n\r\n  if (video) {\r\n    refs.video.textContent = `Zadanie do wideo: ${video}`;\r\n  } else {\r\n    refs.video.remove();\r\n  }\r\n\r\n  return content;\r\n}\r\n","// Modules.\r\nimport { template } from \"travrs\";\r\nimport { remoteModal } from \"pistacja/modals\";\r\n\r\nexport default function usppModal(domian) {\r\n  const requertConfig = {\r\n    mode: \"cors\",\r\n    method: \"post\",\r\n    cache: \"default\",\r\n  };\r\n\r\n  const modalController = remoteModal(\"uspp\");\r\n\r\n  // No modal to display content.\r\n  if (!modalController || !modalController.modal) return;\r\n\r\n  const [content, refs] = template(`\r\n    div.uspp-wrapper.stack\r\n      @content::div.uspp-content       \r\n      @link::a.bubble-button.green.KGSolid.--space-i > \"WSZYSTKIE ZASOBY DLA TEGO WYMAGANIA\"        \r\n  `);\r\n\r\n  modalController.modal.appendChild(content);\r\n\r\n  document.addEventListener(\"click\", event => {\r\n    if (!event.target.matches(\"button[data-uspp-id]\")) return;\r\n\r\n    refs.link.href = `${domian}wyniki-wyszukiwania?q=${event.target.innerText}`;\r\n\r\n    // Show modal.\r\n    modalController.on();\r\n\r\n    // Display waiting msg. after 400ms.\r\n    const timer = setTimeout(() => {\r\n      refs.content.textContent = \"Trwa Å‚adowanie danych...\";\r\n    }, 400);\r\n\r\n    fetch(`${domian}cli/getpppname.php?code=${event.target.dataset.usppId}`, requertConfig)\r\n      .then(r => r.json())\r\n      .then(({ level, name, subject, section }) => {\r\n        clearTimeout(timer);\r\n        refs.content.innerHTML = `\r\n          <div class=\"stack --medium\">\r\n            <h3 class=\"KGSolid text-green font-md rail --h-spread --v-start\">\r\n              <span>${event.target.innerText}</span>\r\n              <button class=\"ghost\" data-pie-modal-close=\"true\">\r\n                <svg class=\"icon sm\">\r\n                  <use href=\"${domian}/templates/pistacja/images/icons/pie-icons-sprite.svg#ui-close\">\r\n                </svg>\r\n              </button>\r\n            </h3>\r\n\r\n            <div class=\"text-gray\">${name}</div>\r\n          \r\n            <hr/>\r\n            <div>\r\n              <div>Przedmiot</div>\r\n              <strong class=\"text-green\">${subject}</strong>\r\n            </div>\r\n            <div>\r\n              <div>Poziom edukacyjny</div>\r\n              <strong class=\"text-green\">${level}</strong>\r\n            </div>\r\n            <div>\r\n              <div>DziaÅ‚</div>\r\n              <strong class=\"text-green\">${section}</strong>\r\n            </div>\r\n          </div>\r\n        `;\r\n        // Redner MathML.\r\n        window.MathJax && window.MathJax.typeset();\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        clearTimeout(timer);\r\n        refs.content.textContent = \"BÅ‚Ä…d danych USPP; Przepraszamy.\";\r\n      });\r\n  });\r\n}\r\n","// Helpers.\r\nimport { queryToObject } from \"utils\";\r\n\r\n// Allows to use <a/> tags as active-buttons with parameters in \"href\" attribute.\r\n//\r\n// USAGE:\r\n//\r\n// <a href=\"#subject?option1=A&option2=B\">MyLink</a>\r\n//\r\n// const ac = anchorCatch(\"selector\");\r\n//\r\n// ac.catch(\"subject\", (options, element) => {\r\n//   console.log(options); // {option1: \"A\", option2: \"B\"}\r\n// });\r\n//\r\nexport default function anchorCatch(selector) {\r\n  const root =\r\n    selector instanceof HTMLElement\r\n      ? selector\r\n      : document.querySelector(selector);\r\n  const handlers = {};\r\n\r\n  function intercept(event) {\r\n    if (!isValidAnchor(event.target)) return;\r\n    const [subject, options] = extractSubjectAndOptions(event.target.href);\r\n    handlers[subject] && handlers[subject](options, event.target);\r\n    event.preventDefault();\r\n  }\r\n\r\n  root && root.addEventListener(\"click\", intercept);\r\n\r\n  return {\r\n    catch: (subject, callback) => {\r\n      if ((typeof subject === \"string\", typeof callback === \"function\")) {\r\n        handlers[subject] = callback;\r\n      }\r\n    },\r\n    destroy: () => {\r\n      root && root.removeEventListener(\"click\", intercept);\r\n      Object.keys(handlers).forEach(key => delete handlers[key]);\r\n    },\r\n  };\r\n}\r\n\r\n// ---- Helpers ----------------\r\n\r\nfunction isValidAnchor(element) {\r\n  return element.nodeName === \"A\" && element.href && element.href.includes(\"#\");\r\n}\r\n\r\nfunction extractSubjectAndOptions(href) {\r\n  const index = href.indexOf(\"#\");\r\n  const params = href.slice(index + 1).split(\"?\");\r\n  const options = params[1] ? queryToObject(`?${params[1]}`) : undefined;\r\n  return [params[0], options];\r\n}\r\n","import { timeToSeconds } from \"utils\";\r\nimport anchorCatch from \"anchor-catch\";\r\n\r\n// Higlihghts video's subtitles accordign to display time and allows to jump\r\n// to specific moment in the video by cllicking on the subtitle link.\r\nexport default function Transcript(player) {\r\n  const transcriptContent = document.querySelector(\".pie-tabs-transcript\");\r\n\r\n  // Exit if no transcript.\r\n  if (!player || !transcriptContent) {\r\n    return;\r\n  }\r\n\r\n  const videoTranscript = anchorCatch(transcriptContent);\r\n\r\n  const clock = createClock(\r\n    collectTranscriptiom(transcriptContent),\r\n    transcriptContent\r\n  );\r\n\r\n  // Catch click event on a subtitle link.\r\n  videoTranscript.catch(\"seek\", options => {\r\n    player.seekTo(timeToSeconds(options.time));\r\n    player.playVideo();\r\n  });\r\n\r\n  player.onStop(() => clock.stop());\r\n  player.onPlay(time => clock.play(Math.floor(time)));\r\n\r\n  // Create map object from all transcription links.\r\n  function collectTranscriptiom(root) {\r\n    return Array.from(root.querySelectorAll(\"a\")).reduce((acc, link) => {\r\n      const time = timeToSeconds(link.href.slice(-8));\r\n      acc[time] = link;\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  // Timing mechanism.\r\n  function createClock(timetable, content) {\r\n    let timer;\r\n\r\n    // NOTE:\r\n    // This will activate fiest element if it starts at 00:00:00\r\n    // For better experience \"time\" in play() method need to be updated before selecting\r\n    // transcription link - this will however exclude link with time: 00:00:00.\r\n    let active = timetable[0];\r\n    active && active.classList.add(\"active\");\r\n\r\n    // API.\r\n    return {\r\n      play: playTime => {\r\n        let time = playTime;\r\n        active && time !== 0 && active.classList.remove(\"active\");\r\n        timer && clearInterval(timer);\r\n        timer = setInterval(() => {\r\n          time += 1;\r\n          if (timetable[time]) {\r\n            active && active.classList.remove(\"active\");\r\n            active = timetable[time];\r\n            active.classList.add(\"active\");\r\n            content.scrollTop = active.offsetTop;\r\n          }\r\n        }, 1000);\r\n      },\r\n\r\n      stop: () => {\r\n        timer && clearInterval(timer);\r\n      },\r\n    };\r\n  };\r\n}\r\n","import pie from \"pistacja/plugin\";\r\nimport DataCopy from \"data-copy\";\r\nimport TabsManager from \"tabs-manager\";\r\nimport YTPlayer from \"./modules/yt-player\";\r\nimport Exercises from \"./modules/exercises\";\r\nimport UsppModal from \"pistacja/uspp-modal\";\r\nimport Transcript from \"./modules/transcript\";\r\nimport PerfectScrollbar from \"perfect-scrollbar\";\r\n\r\n// Styles.\r\nimport \"perfect-scrollbar/css/perfect-scrollbar.css\";\r\n\r\npie.plugin(async function Player(props) {\r\n\r\n  const { domain, modals } = props;\r\n\r\n  // Manage Tabs.\r\n  TabsManager(990);\r\n\r\n  // Handle USPP Modal.\r\n  UsppModal(domain);\r\n\r\n  // Handle player.\r\n  const playerInstance = await YTPlayer(\"yt-video\").catch(() => false);\r\n  Transcript(playerInstance);\r\n\r\n  // Handle exercises.\r\n  Exercises(modals);\r\n\r\n  // Coopy links to clipboard.\r\n  DataCopy();\r\n\r\n  // Perfect scrollbar.\r\n  const playlist = document.querySelector(\"#pie-player-playlist\");\r\n  if (playlist) {\r\n    new PerfectScrollbar(playlist);\r\n    const activeItem = playlist.querySelector(\"li.active\");\r\n    activeItem && (playlist.scrollTop = activeItem.offsetTop - 40);\r\n  }\r\n\r\n});\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.j = 397;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t397: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkpi_stacja_template\"] = self[\"webpackChunkpi_stacja_template\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], () => (__webpack_require__(77)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["pie","piePlugin","plugin","pluginCallback","window","piePlugins","push","init","userConfig","config","error","console","forEach","callPlugin","Error","name","dataCopy","root","document","addEventListener","event","target","matches","navigator","clipboard","writeText","dataset","copy","alert","debounce","callback","delay","immediate","timeout","args","later","clearTimeout","setTimeout","queryToObject","url","searchParams","URLSearchParams","result","entries","key","value","Array","isArray","uid","Date","Math","random","toString","memo","modifier","previous","current","isPrevious","state","newState","timeToSeconds","time","parts","split","parseInt","insertCSS","styles","override","styleTag","querySelector","createElement","head","appendChild","textContent","PieError","host","message","stack","prototype","memoElement","currentElement","klass","toggle","classList","add","newElement","remove","watchScreen","predicate","emmitOnInit","prevMode","handler","screenWidth","innerWidth","screenHeight","innerHeight","mobile","tablet","mode","undefined","removeEventListener","css","mobileBreakpoint","TabsManager","tabs","from","querySelectorAll","container","currentTab","find","t","contains","currentButton","width","deselectTabs","selectTab","targetName","button","HTMLElement","tab","tabTarget","Object","freeze","getCurrentTab","getCurrentButton","YTPlayer","id","height","Promise","resolve","reject","player","playCallback","stopCallback","onYouTubePlayerAPIReady","YTPlayerReady","getElementById","YT","Player","videoId","videoid","playerVars","rel","modestbranding","events","onReady","playerIsReady","onStateChange","playerStateChange","loader","parentNode","removeChild","onStop","onPlay","fullscreen","requestFullScreen","iframe","mozRequestFullScreen","webkitRequestFullScreen","bind","data","getCurrentTime","PerfectScrollbar","Modals","currentModal","listeners","body","modals","reduce","acc","modal","pieModal","scrollContent","pieModalTrigger","pieModalClose","listener","listen","includes","cleanup","index","indexOf","splice","remoteModal","modalName","$","selector","trigger","on","click","off","analytics","exercise","startTime","startRecording","exerciseTitle","now","stopRecording","timeEllapsed","dataLayer","timeValue","humanTime","customValue","start","title","millis","minutes","floor","seconds","toFixed","exerciseCleaner","src","template","cleaner","Exercises","location","search","modalController","model","pie_video_exercises","tracker","exUrl","exTitle","videoExercise","video","content","refs","header","usppModal","domian","requertConfig","method","cache","link","href","innerText","timer","fetch","usppId","then","r","json","level","subject","section","innerHTML","MathJax","typeset","err","anchorCatch","handlers","intercept","isValidAnchor","extractSubjectAndOptions","options","preventDefault","destroy","keys","element","nodeName","params","slice","Transcript","transcriptContent","videoTranscript","clock","createClock","collectTranscriptiom","seekTo","playVideo","stop","play","timetable","active","playTime","clearInterval","setInterval","scrollTop","offsetTop","DataCopy","UsppModal","props","domain","playerInstance","playlist","activeItem"],"sourceRoot":""}